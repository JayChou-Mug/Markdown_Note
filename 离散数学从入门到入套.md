# 离散数学从入门到入套

## 1.证明

What is proof?

Definition 1:

​		A mathematical proof of a **proposition** is a chain of logical deductions leading to the proposition from a base set of axioms.

> 一个命题的数学证明是一系列的逻辑演绎，从一组基本公理导出该命题

*A **conjecture** :if you believe that  a statement is true but can not prove it.*

> 一个猜想：如果你相信一个猜想是正确的，但又不能证明他

​	***Axioms** :are statement we accept as true without proof.*

> 公理：是我们无需证明就接受为真的陈述

​	***Lemma** :is a little theorem that you use in the proof of a bigger theorem.*

> 引理：是一个小定理，用来证明一个更大的定理

*A **Theorem** :is true proposition that is guaranteed by a proof .*

> 定理：可以被证明的真命题

Definition 2:

命题：是一个或真或假的语句（表述）

$$
\text{For every nonnegative integer }n\text{, the value of }n^2+n+41\text{ is prime.}
$$

$$
\text{令}P(n)::=\text{the value of }n^2+n+41\text{ is prime，其中::=表示根据定义相等}
$$

问：$P(n)$是命题吗？答：否。

$P(0),P(1),P(2)...P(39)$都是真命题，但是$P(40)$不是真命题。即$n$变化时，真值并不唯一，所以$P(n)$并不是命题。而原式`For ....is prime`却是一个命题，而且是假命题。



Definition 3: A **predicate** is a template for a proposition,taking one or more arguments.

A predicate itself is neither true nor false,but takes on the values true or false when applied to specific arguments.

> 谓词是命题的模板，接受一个或多个参数。谓词本身既不是真也不是假，而是应用于特定参数时具有真值或假值。



Definition 4: **Quantifiers** such as "for all","for any","for every,∀ "for some",and "there exists" ∀ ∃specify the scope of a predicate.

> 量词，如所有、任何、每个、某些来指定谓词的范围



**假言推理**：
$$
\frac{P,P\rightarrow Q}{Q}
\\\text{ 若P为真，P能推出Q，则Q也是真的}
$$
**假言三段论**：
$$
\frac{P\rightarrow Q ,Q\rightarrow R}{P\rightarrow R}
$$
**逆否命题**：
$$
\frac{P\rightarrow Q}{\lnot Q\rightarrow\lnot P}
$$
Example:

$$
\text{if }x\text{ is an odd integer, then }x+1\text{ is even.}
$$
proof: 
$$
\text{Assume }x\text{ is odd.}
\\\text{Then by definition }x=2k+1(k\in Z)
\\\text{So, }x+1=2k+1+1=2(k+1)\text{,therefore } x+1\text{ is an even number.}
$$



### 1.1直接证明法

Example:

$$
\text{Let }x \text{ be a positive integer. If the sum of the digits of }x \text{ is division by 9, then }x \text{ is divisible by 9.}
\\\text{如果正整数 }x\text{ 的各个位数之和等于9，则 }x\text{ 能被9整除}
$$

$$
\text{if } 9\mid x(x>0)\rightarrow 9\mid(a_n+a_{n-1}+...+a_{2}+a_1+a_0)
$$
​	proof: 
$$
\text{不妨设 }
x = a_na_{n-1}a_{n-2}...a_2a_1a_0\text{(每一个a都代表它的位数)}
\\\text{即 }
x = a_n\times10^n+a_{n-1}\times10^{n-1}+...+a_2\times10^2+a_1\times10^1+a_0\times10^0
\\\because\sum_{i=0}^{n}{a_i}=9
\\\therefore
x=a_n+a_{n-1}+...+a_0+a_n\times(10^{n}-1)+a_{n-1}\times(10^{n-1}-1)+...+a_2\times(10^2-1)+a_1\times(10^1-1)
\\=9+a_n\times(10^{n}-1)+a_{n-1}\times(10^{n-1}-1)+...+a_2\times(10^2-1)+a_1\times(10^1-1)
\\\text{不难发现每一项都是9的倍数，所以}x\text{自然可以被9整除。}
$$

### 1.2逆否命题

example:
$$
m\in N^+,\text{if }m^2\text{ is even, then }m\text{ is even.}
\\m是正整数，如果m^2是偶数，则m也是偶数
$$

proof:
$$
\text{现在证明逆否命题: if }m\text{ is odd,then }m^2\text{ is odd.}
\\如果m是奇数，则m^2也是奇数
\\不妨设m=2k+1(k\in Z )
\\\because m^2=(2k+1)^2=4(k^2+k)+1\,is\,odd
\\\therefore 原命题成立
$$

### 1.3反证法

example 1:
$$
\text{There are infinitudely many prime number.}
\\\text{素数有无穷个}
$$
proof
$$
\text{假设素数是有穷的，不妨设P为所有素数的集合：}P=\{a_1,a_2,a_3...a_n\}\text{除集合P的元素外再无其它素数}
\\\text{令}r=a_1\times a_2\times a_3\times...\times a_n +1
\\\text{显然 }r\notin P\, ……(1)
\\\therefore r\text{不是素数}
\\\forall a_i \in P,\frac{r}{ai}=a_1\times a_2\times a_3\times ...\times a_n + \frac{1}{a_i}
\\\because\text{无论}a_i怎么取，r\div a_i 永远都不是整数
\\\therefore r \in P\,……(2)
\\\text{显然(1)(2)是矛盾的，因此，素数是无穷的。}
$$
example 2:
$$
\sqrt{2 }\text{ is irrational.}
\\\sqrt{2}是无理数
$$
proof:
$$
\text{假设}\sqrt{2}为有理数，则存在无公因子的有理数m,n\in N^+……(1)
\\\text{使得}\sqrt{2}=\frac{m}{n}
\\\therefore m^2 = 2\times n^2
\\\therefore m^2是偶数，则m是偶数(1.2中已证明)
\\令 m=2k(k\in Z)
\\\because m^2=4k^2\to n^2=\frac{m^2}{2}
\\\therefore n^2=2k^2
\\同理可得n也是偶数
\\\therefore m,n有公因子……(2)
\\\therefore显然(1)(2)矛盾，原命题成立
$$
`现在使用另一种方法证明(摘自美国数学月报):`
$$
\\假设\sqrt{2}是有理数
\\存在一个最小正整数p，满足(\sqrt{2}-1)p\in N
\\显然0<(\sqrt{2}-1)p<p
\\记q=(\sqrt{2}-1)p
\\\because (\sqrt{2}-1)q=(\sqrt{2}-1)^2p=(2-2\sqrt{2}+1)p=p-2(\sqrt{2}-1)p
\\又\because (\sqrt{2}-1)p\in N
\\\therefore p-2(\sqrt{2}-1)p \in Z
\\\because \sqrt{2}-1<\frac{1}{2}\to 2(\sqrt{2}-1)<1
\\\therefore p-2(\sqrt{2}-1)p >0\to 2(\sqrt{2}-1)p <p
\\\to 2(\sqrt{2}-1)p 是比p更小的正整数，这与p是最小正整数矛盾
\\\therefore 原命题成立
$$


example 3:
$$
\sqrt{3 }\text{ is irrational.}
\\\sqrt{3}是无理数
$$
proof:
$$
假设\sqrt{3}是有理数，则存在无公因子的有理数m,n\in N^+……(1)
\\使得\sqrt{3}=\frac{m}{n}
\\\because 3n^2=m^2
\\\therefore m^2是3的倍数
\\现在证明m^2是3的倍数，则m是3的倍数……(2)
\\证明逆反命题:若m不是3的倍数，则m^2不是3的倍数
\\不妨设m=3k\pm1(k\in Z)
\\\because当m=3k-1时
\\m^2=(3k-1)^2=9k^2-6k+1=3(3k^2-2k)+1 不是3的倍数
\\又\because当m=3k+1时
\\m^2=(3k+1)^2=9k^2+6k+1=3(3k^2+2k)+1 也不是3的倍数
\\\therefore (2)得证
\\\because 已知m^2是3的倍数
\\\therefore m是3的倍数
\\设m=3k，则m^2=9k^2
\\\because 3n^2=m^2=9k^2
\\\therefore n^2=3k^2是3的倍数
\\\therefore n是3的倍数
\\\therefore m,n都有公因数3……(3)
\\\therefore 显然(1)(3)矛盾，原命题成立
$$



example 4:
$$
分数都是有理数
$$
`已知有理数均可写成两个整数的最简比，无理数是无限不循环小数`

proof:
$$
假设无理数能写成分数形式
\\令无理数x=\frac{a}{b}(a,b\in Z),其中a,b无公因数
\\考察可知x的余数在1,2,...,b-1之间
\\当计算了至多b-1次后，下一次取到的余数必然还在1,2,...,b-1内
\\此时余数会出现重复，会碰到循环节(循环节最长不超过b)
\\\therefore x是无限循环小数(1)
\\\because 无理数应是无限不循环小数(2)
\\显然(1)(2)矛盾，原命题成立
$$

### 1.4案例分析法

`当证明对象是存在性命题是，可使用该方法。`

example 1:
$$
\text{There are irrational numbers }x,y\text{, such that }x^y\text{ is a rational.}
\\存在无理数x,y,使得x^y为有理数
$$
proof:
$$
考察\sqrt{2}^{\sqrt{2}}，要么是有理数，要么是无理数
\\分两种情况讨论：
\\i)\,假设\sqrt{2}^{\sqrt{2}}是有理数：
\\令x=\sqrt{2},y=\sqrt{2},显然x,y均是无理数
\\\because x^y=\sqrt{2}^{\sqrt{2}}是有理数
\\\therefore原命题成立
\\ii)假设\sqrt{2}^{\sqrt{2}}是无理数：
\\令x=\sqrt{2}^{\sqrt{2}},y=\sqrt{2},显然x,y均是无理数
\\\because x^y=(\sqrt{2}^{\sqrt{2}})^{\sqrt{2}}=\sqrt{2}^2=2是有理数
\\\therefore 原命题成立
\\综上i)、ii)，原命题成立
$$
example 2:
$$
已知在6个人中，两两之间要么是敌人，要么是朋友。请证明在这6人中，必有3人之间互为朋友或者互为敌人
$$
proof:

我们用使用案例分析法，用图例来证明：

现在使用6个节点分别代表6个人：

<img src="C:\Users\Raymond\Pictures\离散数学\1.png" style="zoom:50%;" />
$$
考察A，显然它至少和其他5个节点中的3个是朋友(红色)或敌人
\\假设A和C、D、E都是朋友
\\再考察C，不妨假设它与B、F、D都是敌人，与A、E是朋友
\\则对于A、C、E来说，它们能用红线构成一个三角形，代表相互之间都是朋友
\\则是，所有元素之间必能至少用红线组成一个三角形(代表至少有3人是朋友)
\\或者至少用黑线组成一个三角形(代表至少有3人是敌人)
\\原命题成立
$$
<img src="C:\Users\Raymond\Pictures\离散数学\2.png" style="zoom:50%;" />

### 1.5当且仅当

example:
$$
\text{For any integer  n, }n^2\text{ is odd if and only if }n\text{ is odd.}
\\对于任何一个整数n,有n^2是奇数，当且仅当n是奇数
$$
proof:
$$
\text{first, we show that if }\,n\text{ is odd then }n^2\text{ is odd}
\\令n=2k+1(k\in Z)\text{ is odd}
\\\therefore n^2=4k^2+4k+1=2(2k^2+2k)+1\text{ is odd, too}
\\\text{next, we showed that if }n^2\text{ is odd,then }n\text{ must be odd}
\\我们证明逆否命题:如果n是偶数，则n^2是偶数
\\令n=2k\text{ is even}
\\则n^2=4k^2=2(2k^2) \text{ is even}
\\综上，n^2\text{ is odd if and only if }n\text{ is odd}
$$

## 2.良序证明

***The well ordering principle:*** `非负非空的整数集合`必有最小元素。



### 2.1良序证明法

Example 1：
$$
设m，n为任意正整数，则m/n可以写成既约分数形式。
$$
proof：

$$
用反证法：设存在正整数m,n，使得m/n不能写成既约分数形式，则必然存在

\\\frac{m}{n}=\frac{m_0}{n_0}=\frac{m_1}{n_1}=...=\frac{m_k}{n_k}\,(1)

\\令公式(1)中分子的集合为C。显然集合C是非空非负的整数集合

\\根据良序法则，集合C必有最小元素，令之为m_0

\\因为\frac{m}{n}不能写成既约分数形式，因此，m_0,n_0一定存在着公因子p，且p>1

\\即\frac{m_0/p}{n_0/p}=\frac{m_0}{n_0}

\\只要左式可以表达成最简分数形式，那么m_0,n_0也能

\\所以分数\frac{m_0/p}{n_0/p}也不能被写成最简形式

\\因此，根据C的定义可知，分子部分m_0/p也在C中

\\但m_0/p<m_0，这与m0是C中最小元素相矛盾

\\原命题成立
$$
Example 2:
$$
4a^3+2b^3=c^3无整数解
$$
proof:
$$
使用反证法：4a^3+2b^3=c^3有整数解
\\假设解集为(a_1,b_1,c_1),(a_2,b_2,c_2),...(a_n,b_n,c_n),其中n\geq 1
\\构造C为所有解向量中c的取值构成的集合，满足非负非空的整数集合
\\根据良序法则可知C中存在一个最小整数c_0
\\满足4a_0^3+2b_0^3=c_0^3
\\显然，4a_0^3是偶数，2b_0^3也是偶数，则c_0^3也是偶数,即c_0为偶数
\\令c_0=2k，有4a_0^3+2b_0^3=8k^3
\\简化后有2a_0^3+b_0^3=4k^3可知b_0是偶数
\\令b_0=2j，有4a_0^3+2\times 8j^3=8k^3
\\简化后有a_0^3+4j^3=2k^3,易得a_0是偶数
\\\because a_0,b_0,c_0均是偶数
\\\therefore a_0,b_0,c_0\geq 2
\\\therefore \frac{a_0}{2},\frac{b_0}{2},\frac{c_0}{2}依旧是非负整数
\\可将原式改写为4(\frac{a_0}{2})^3+2(\frac{b_0}{2})^3=(\frac{c_0}{2})^3有整数解
\\根据C的定义可知，\frac{c_0}{2}也在C中
\\而\frac{c_0}{2}<c_0，这与c_0是C中的最小元素矛盾
\\原命题成立
$$

### 2.2良序证明模板

>使用良序原理，证明对所有$n\in N,P(n)$为真：
>
>- 假设命题为假，即$\exist n\in N^+$,使得$\lnot P(n)$成立
>
>- 令所有符合条件的正整数构成集合$C$，显然集合$C$为非空非负整数集
>
>- **根据`良序法则`可知，有一个最小元素$c_0\in C$,即**
>
>- 这部分取决于具体的证明任务
>
>- 产生矛盾($C$是空集或者有存在比$c_0$更小的元素)
>
>原命题成立

example:
$$
对于大于等于50的自然数n，存在i,j,k\geq 0,使
\\n=7i+11j+13k
$$
proof:
$$
假设存在大于等于50的自然数n,不满足n=7i+11j+13k
\\构造C为所有不满足条件的大于等于50的自然数的集合
\\根据良序法则，在C中存在一个最小元素c_0
\\\because 50=7\times0+11\times1+13\times3
\\51=7\times0+11\times1+13\times3
\\52=7\times2+11\times1+13\times2
\\53=7\times0+11\times0+13\times3
\\54=7\times4+11\times0+13\times2
\\55=7\times6+11\times0+13\times1
\\56=7\times8+11\times0+13\times0
\\\therefore c_0\geq57
\\显然c_0-7\geq 50且\notin C
\\\because c_0-7=7i+11j+13k
\\\therefore c_0=7(i+1)+11j+13k
\\显然与c_0是不满足7i+11j+13k的大于等于50的自然数相矛盾
\\原命题成立
$$


### 2.3质因数分解

$$
证明大于1的整数均能表达为素数之积(素数的素数之积就是它本身)
$$

proof:
$$
假设存在大于1的整数，满足不能表达为素数之积
\\构造C为所有满足不能表达为素数之积的大于1的整数的集合
\\根据良序法则，在C中存在一个最小元素c_0
\\若c_0是一个素数，则它本身就是素数之积，这与c_0不能表达为素数之积相矛盾
\\若c_0是一个合数
\\\because c_0是C中不能表达为素数之积的最小元素
\\\therefore c_0可写成c_0=ab,则a,b\notin C
\\\therefore a,b可写成素数之积
\\记a=a_0a_1a_2...a_i,b=b_0b_1b_2...b_j
\\\therefore c_0=a_0a_1a_2...a_i\times b_0b_1b_2...b_j
\\\because 等式右边是素数之积
\\与c_0不可表达为素数之积相矛盾
\\\therefore 原命题成立
$$

## 3.命题逻辑

### 3.1逻辑与运算

> 逻辑是研究`推理`的；
>
> 研究是由`前提的真`得到`结论的真`；
>
> 有真的前提得到真的结论；
>
> 前提和结论的真是由领域科学研究的对象，`逻辑只研究推理`。

**命题**

Definition 1:A **proposition** is a statement that is either true or false.



Definition 2:根据命题的构成形式，可以将命题分为:

​	`简单命题`：只由一个主语和一个谓语构成的最简单的陈述句，称为简单命题，或原子命题或原子(***atoms***)。

​	`复合命题`：由原子命题和`命题联结词`构成的命题。



`命题变元`(***proposition variable***): 未指定具体命题，可以代表任意命题的命题标识符，命题变元不是命题。

**逻辑联结词**

Definition 3:设P为命题，则P的否定是一个新的命题，记为$\lnot$P,读作非P。
$$
若P为T，则\lnot P为F；若P为F，则\lnot P为T
$$

真值表如下：

| $P$  | $\lnot P$ |
| ---- | --------- |
| T    | F         |
| F    | T         |

Definition 4:设P,Q为命题，那么P并且Q也是命题，记P$\wedge$Q，称为P与Q的合取。
$$
P\wedge Q为真，当且仅当P,Q都为真
$$
真值表如下：

| $P$  | $Q$  | $P\wedge Q$ |
| ---- | ---- | ----------- |
| T    | T    | T           |
| T    | F    | F           |
| F    | T    | F           |
| F    | F    | F           |



Definition 5:设P,Q为命题，那么P或Q也是命题，记P$\vee$Q，称为P与Q的析取。
$$
P\vee Q为假，当且仅当P,Q都为假
$$
真值表如下：

| $P$  | $Q$  | $P\vee Q$ |
| ---- | ---- | --------- |
| T    | T    | T         |
| T    | F    | T         |
| F    | T    | T         |
| F    | F    | F         |

> *当P,Q不可兼得时，可以表示为$(\lnot P \wedge Q)\vee(P\wedge \lnot Q)$。*

Definition 6: 设P,Q为命题，那么“如果P，则Q”也是命题，记作$P\to Q$,P称为前件，Q称为后件。

真值表如下：

| P    | Q    | $P\to Q$ |
| ---- | ---- | -------- |
| T    | T    | T        |
| T    | F    | F        |
| F    | T    | T        |
| F    | F    | T        |

> *前真后假为假，其余为真；表格后两行称为**善意推定**。*

Definition 8: 设P,Q为命题，那么“如果P当且仅当Q”也是命题，记作$P\leftrightarrow Q$,

真值表如下：

| P    | Q    | $P\leftrightarrow Q$ |
| ---- | ---- | -------------------- |
| T    | T    | T                    |
| T    | F    | F                    |
| F    | T    | F                    |
| F    | F    | T                    |

> 前真后真为真，前假后假也为真，其余为假。

***在这4种逻辑联结词中，优先级由高到低分别是$\lnot ~~\wedge ~~\vee ~~\to ~~\leftrightarrow$。***

### 3.2合式公式

Definition 9: 

>1.真值T,F是合式公式；
>
>2.原子命题是合式公式；
>
>3.如果A是合式公式，那么($\lnot A$)也是合式公式；
>
>4.如果A和B是合式公式，那么(A$\wedge$B),(A$\vee$B)(A$\to$B)(A$\leftrightarrow$B)都是合式公式；
>
>5.只有有限次地应用1~4构成的符号串，才是合式公式。

*其中，1~2是基础，3~5是生成规则。*

**公式的真值表**

Example 1:构造$\lnot (P\wedge Q)\leftrightarrow (\lnot P\vee\lnot Q)$

*Tips: 根据优先级拆开合式公式，先计算原子命题的真值*

| $P$  | $Q$  | $P\wedge Q$ | $\lnot (P\wedge Q)$ | $\lnot P$ | $\lnot Q$ | $\lnot P\vee\lnot Q$ | $\lnot (P\wedge Q)\leftrightarrow (\lnot P\vee\lnot Q)$ |
| :--: | :--: | :---------: | :-----------------: | :-------: | :-------: | :------------------: | :-----------------------------------------------------: |
|  T   |  T   |      T      |         `F`         |    `F`    |    `F`    |         `F`          |                            T                            |
|  T   | `F`  |     `F`     |          T          |    `F`    |     T     |          T           |                            T                            |
| `F`  |  T   |     `F`     |          T          |     T     |    `F`    |          T           |                            T                            |
| `F`  | `F`  |     `F`     |          T          |     T     |     T     |          T           |                            T                            |

### 3.3命题公式分类

Definition 10:

> 给定命题公式A，如果对A中变元进行赋值：
>
> ​	所有赋值A都为真，则称A为`永真式`或`重言式`；
>
> ​	如果对A中变元的所有赋值A都为假，则称A`永假式`或`矛盾式`；
>
> ​	如果对A中变元的赋值至少有一组使A都为真，则称A为`可满足式`。

其中，永假式、永真式和可满足式的关系可以表示为：
$$
\scr \lnot永假式=可满足式~~~永真式\in 可满足式
$$

### 3.4等值公式

给定两个命题公式$A$,$B$,设$P_1,P_2,...,P_n$为出现于$A$,$B$中的原子命题。如果对$P_1,P_2,...,P_n$任意一组真值指派命题公式$A$,$B$的真值都相同，则称命题公式$A$,$B$是等值的，记作：$A\equiv B$或$A\Leftrightarrow B$。

**常用等值公式（一）**

- *恒等律*

$p\wedge T\equiv p~~~~~p\vee F\equiv p$

- *幂等律*

$p\wedge p\equiv p~~~~~p\vee p\equiv p$

- *交换律*

$p\vee q\equiv q\vee p~~~~~p\wedge q\equiv q\wedge p$

- *分配律*

$p\vee(q\wedge r)\equiv (p\vee q)\wedge(p\vee r)~~~~~p\wedge(q\vee r)\equiv (p\wedge q)\vee(p\wedge r)$

- *双重否定律*

$\lnot\lnot p\equiv p$

- *零律*

$p\vee T\equiv T ~~~~~p\wedge F\equiv F$

- *吸收律*

$p\vee (p\wedge q)\equiv p~~~~~p\wedge (p\vee q)\equiv p$

- *结合律*

$(p\vee q)\vee r\equiv p\vee(q\vee r)~~~~~(p\wedge q)\wedge r\equiv p\wedge(q\wedge r)$

- *德摩尔根律*

$\lnot(p\wedge q)\equiv \lnot p\vee \lnot q~~~~~\lnot(p\vee q)\equiv\lnot p\wedge\lnot q$

- *否定律*

$p\vee \lnot p\equiv T~~~~~p\wedge \lnot p\equiv F$



**常用等值公式（二）**

$\Delta:p\to q\equiv\lnot p\vee q（蕴含等价式）$
$\\(p\to q)\wedge(p\to r)\equiv p\to(q\wedge r)$
$\\\Delta:p\leftrightarrow q\equiv(p\to q)\wedge(q\to p)（等值等价式）$
$\\--------------------$
$\\p\to q\equiv \lnot q\to\lnot p（原命题=逆否命题）$
$\\(p\to r)\wedge(q\to r)\equiv (p\vee q)\to r$
$\\\Delta:p\leftrightarrow q\equiv\lnot p\leftrightarrow \lnot q（等价否定等值式）$
$\\--------------------$
$\\\Delta:p\vee q\equiv\lnot p\to q$
$\\(p\to q)\vee(p\to r)\equiv p\to(q\vee r)$
$\\\Delta:p\leftrightarrow q\equiv (p\wedge q)\vee(\lnot p\wedge \lnot q)$
$\\--------------------$
$\\p\wedge q\equiv\lnot(p\to\lnot q)$
$\\(p\to r)\vee(q\to r)\equiv(p\wedge q)\to r$
$\\\Delta:\lnot(p\leftrightarrow q)\equiv p\leftrightarrow\lnot q\equiv\lnot p\leftrightarrow q$
$\\--------------------$
$\\\lnot(p\to q)\equiv p\wedge\lnot q$

### 3.5等值演算

有些时候，当需要证明一个等值公式时，如果从它们的真值表入手证明，往往会比较复杂，如$(A\to D)\wedge (B\to D)\equiv (A\vee B)\to D$，它的真值表是一个8*8=64的表格，这时就可以通过已学的等值公式进行`等值演算`：
$$
(A\to D)\wedge (B\to D)\equiv (\lnot A \vee D)\wedge(\lnot B \vee D)
\\\equiv (\lnot A \wedge \lnot B)\vee D\equiv \lnot(A\vee B) \vee D
\\\equiv (A \vee B)\to D
$$
example 1:

 证明$((A\wedge B)\to C)\wedge(B\to(D\vee C))\equiv B\wedge(D\to A)\to C$

proof:

$((A\wedge B)\to C)\wedge(B\to(D\vee C))$
$\equiv (\lnot(A\wedge B)\vee C)\wedge(\lnot B\vee(D\vee C))$
$\equiv (\lnot(A \wedge B)\wedge (\lnot B\vee D))\vee C$
$\equiv((\lnot A\vee\lnot B)\wedge(\lnot B\vee D))\vee C$
$\equiv(\lnot B\vee(\lnot A\wedge D))\vee C$
$\equiv\lnot\lnot(\lnot B\vee(\lnot A\wedge D))\vee C$
$\equiv\lnot(B\wedge\lnot(\lnot A\wedge D))\vee C$
$\equiv\lnot(B\wedge(A\vee\lnot D))\vee C$
$\equiv(B\wedge(A\vee\lnot D))\to C$
$\equiv (B\wedge(D\to A))\to C$



example 2:

​	证明$\lnot(p\leftrightarrow q)\equiv p\leftrightarrow\lnot q$

proof:

$\lnot(p\leftrightarrow q)$

$\equiv \lnot((p\to q)\wedge(q\to p))$

$\equiv \lnot((\lnot p\vee q)\wedge(\lnot q\vee p))$

$\equiv(\lnot(\lnot p \vee q)\vee\lnot(\lnot q\vee p))$

$\equiv((p\wedge\lnot q)\vee(q\wedge\lnot p))$

$\equiv((p\wedge \lnot q)\vee q)\wedge((p\wedge\lnot q)\vee\lnot p)$

$\equiv ((q\vee p)\wedge(q\vee \lnot q))\wedge ((\lnot p\vee p)\wedge (\lnot p\vee\lnot q))$

$\equiv(q\vee p)\wedge(\lnot p\vee\lnot q )$

$\equiv (\lnot q\to p)\wedge(p\to \lnot q)$

$\equiv p\leftrightarrow\lnot q$

### 3.6蕴含

对于条件命题$p\to q$，如果$p\to q$是一个永真式，则把$p\to q$记作$p\Rightarrow q$，称为p蕴含q。

分析$p\to q$的真值表可知

| p    | q    | $p\to q$ |
| ---- | ---- | -------- |
| T    | T    | T        |
| T    | F    | F        |
| F    | T    | T        |
| F    | F    | T        |

欲证$p\to q$是一个永真式，则有：

*`i)`* 若p为真，则q为真；

*`ii)`* 若q为假，则p为假。

**常见的蕴含公式**

| $P\wedge Q\Rightarrow P$                                     |
| ------------------------------------------------------------ |
| $P\wedge Q\Rightarrow Q$                                     |
| $P\Rightarrow P\vee Q$                                       |
| $\lnot P\Rightarrow P\to Q$                                  |
| $Q\Rightarrow P\to Q$                                        |
| $\lnot(P\to Q)\Rightarrow P$                                 |
| $\lnot(P\to Q)\Rightarrow\lnot Q$                            |
| $P\wedge(P\to Q)\Rightarrow Q$                               |
| $\lnot Q \wedge(P\to Q)\Rightarrow\lnot P$                   |
| $\lnot P \wedge (P\vee Q) \Rightarrow Q$                     |
| $(P\to Q)\wedge(Q\to R)\Rightarrow P\to R$                   |
| $(P\vee Q)\wedge(P\to R)\wedge(Q\to R)\Rightarrow R$         |
| $(P\to Q)\wedge(R\to S)\Rightarrow(P\wedge R)\to(Q\wedge S)$ |
| $(P\rightleftharpoons Q)\wedge(Q \rightleftharpoons R)\Rightarrow P\rightleftharpoons R$ |

exmple 1:

​	证明蕴含式$A\to B,\lnot (B\vee C)\Rightarrow \lnot A$

> 证明前件为真时，后件为真；后件为假时，前件为真

proof:
$$
i)令A\to B,\lnot (B\vee C)为真
\\则A\to B和\lnot(B\vee C)均为真
\\\because \lnot(B\vee C)\equiv \lnot B\wedge\lnot C为真
\\\therefore \lnot B为真
\\即B为假
\\\because A\to B为真且B为假
\\\therefore A为假
\\即\lnot A为真
\\-------------
\\ii)令\lnot A为假，则A为真
\\(1).若B为真，则\lnot B为假
\\\therefore A\to B为真
\\\because \lnot(B\vee C)\equiv\lnot B\wedge\lnot C，而\lnot B为假
\\\therefore \lnot(B\vee C)为假
\\\therefore A\to B,\lnot (B\vee C)为假
\\(2).若B为假，则\lnot B为真
\\\therefore A\to B为假
\\\therefore A\to B,\lnot (B\vee C)为假
\\综上，A\to B,\lnot (B\vee C)\Rightarrow \lnot A
$$

但在一些时候，使用这种逻辑结构来证明蕴含式会比较繁琐，如证明蕴含式$P\to Q,\lnot Q\vee R,\lnot R,\lnot(\lnot P\wedge S)\Rightarrow\lnot S$。如果再使用上述方式证明，会出现3个变元，处理起来相当复杂。这时，我们可以通过应用等值公式、蕴含式进行形式演算：

### 3.7自然推理系统

| (1)  | $\lnot R$                | P        |
| ---- | ------------------------ | -------- |
| (2)  | $\lnot Q\vee R$          | P        |
| (3)  | $\lnot Q$                | T(1)(2)I |
| (4)  | $P\to Q$                 | P        |
| (5)  | $\lnot P$                | T(3)(4)I |
| (6)  | $\lnot(\lnot P\wedge S)$ | P        |
| (7)  | $P\vee \lnot S$          | T(6)E    |
| (8)  | $\lnot S$                | T(5)(7)I |

> 其中`( )`代表步骤，`P`代表前提，`T`代表推演，`I`代表蕴含，`E`代表等值



example 2:

​	证明蕴含式$A\to B,\lnot(B\vee C)\Rightarrow \lnot A$

proof:

| (1)  | $\lnot(B\vee C)$         | P        |
| ---- | ------------------------ | -------- |
| (2)  | $\lnot(B\wedge \lnot C)$ | T(1)E    |
| (3)  | $\lnot B$                | T(2)I    |
| (4)  | $A\to B$                 | P        |
| (5)  | $\lnot A$                | T(3)(4)I |

另外，还可以使用反证法，只要最后推出矛盾即可：

反证法：

| (1)  | $\lnot(\lnot A)$        | P(附加前提) |
| ---- | ----------------------- | ----------- |
| (2)  | $A$                     | T(1)E       |
| (3)  | $A\to B$                | P           |
| (4)  | $B$                     | T(2)(3)I    |
| (5)  | $\lnot(B\vee C)$        | P           |
| (6)  | $\lnot B \wedge\lnot C$ | T(5)E       |
| (7)  | $\lnot B$               | T(6)I       |
| (8)  | $B\wedge \lnot B$       | T(4)(6)I    |



- **CP规则**：$A\Rightarrow B\to C\equiv B,C\Rightarrow A$



example 3:

​	证明$\lnot A\to B,B\to C\Rightarrow \lnot A \to C$

> 等值$\lnot A,\lnot A\to B,B\to C\Rightarrow C$

利用CP规则:

| (1)  | $\lnot A$      | P(附加前提) |
| ---- | -------------- | ----------- |
| (2)  | $\lnot A\to B$ | P           |
| (3)  | $B$            | T(1)(2)I    |
| (4)  | $B\to C$       | P           |
| (5)  | $C$            | T(3)(4)I    |

## 4.谓词逻辑

### 4.1谓词

Definition 1: 谓词是命题的模板，接受一个或多个参数。谓词本身既不是真也不是假，而是应用于特定参数时具有真值或假值。

Example : $x=y+3$

​	**二元谓词**$Q:Q(x,y)$表示$x=y+3$

​	$Q$的**论域**是实数集

​	$Q(5,2)$是一个取值为T的命题

​	$P(1,2)$是一个取值为F的命题



### 4.2量词

Definition 2: $\forall$称为**全称量词**，若$P(x)$是谓词，$\forall xP(x)$表示“对所有的$x$都有$P(x)$。”

Definition 3: $\exists $称为**存在量词**，若$P(x)$是谓词，$\exist xP(x)$表示“存在某个$x$使得$P(x)$。”

> 优先级：量词的优先级高于其他逻辑运算符。



### 4.3论域

Definition 4: 个体变量的取值范围称为**论域**。

Definition 5: 全总个体域：宇宙间万事万物所构成的集合。



- **带量词的公式的否定**

$\lnot \forall x P(x)\equiv \exists x\lnot P(x)$

$\lnot\exists xP(x)\equiv\forall x\lnot P(x)$

- **将自然语言翻译成逻辑表达式**

example 1: 我们班每个同学都学过高等数学

​	令$s(x):x$是我们班同学；$c(x):x$学过高等数学

对于世间万事万物，如果$x$是我们班同学，则$x$必学过高等数学

> ​	$\forall x(s(x)\to c(x))$



example 2: 我们班有的同学挂过高等数学

​	令$s(x):x$是我们班同学；$c(x):x$挂过高等数学

对于世间万事万物，存在着$x$既是我们班同学，$x$也挂过高等数学

> ​	$\exists x(s(x)\wedge c(x))$

- **与量词有关的“自然演绎”规则**

**全称指定(*Universal Specification，简称US*)**：$\forall xP(x)\quad\therefore P(c)$

**全称生成(*Universal Generalization，简称UG*)**：$P(c)对任意的c \quad\therefore \forall xP(x)$

**存在指定(*Existential Specification，简称ES*)**：$\exists xP(x)\quad\therefore P(c)对于某个c$

**存在生成(*Existential Generalization,简称EG*)**：$P(c)对某个c \quad\therefore \exists xP(x)$

### 4.4谓词逻辑形式化推理

example 1: $\forall x(F(x)\to G(x)),\exists xF(x)\Rightarrow \exists xG(x)$

| (1)  | $\exists xF(x)$           | P        |
| ---- | ------------------------- | -------- |
| (2)  | $F(c)$                    | ES(3)    |
| (3)  | $\forall x(F(x)\to G(x))$ | P        |
| (4)  | $F(c)\to G(c)$            | US(1)    |
| (5)  | $G(c)$                    | T(2)(4)I |
| (6)  | $\exists xG(x)$           | EG(5)    |

> 注意，在上述推理当中，(1)(2)和(3)(4)的顺序不可颠倒，因为(4)中任意取到的$c$不一定是(2)中存在的那个$c$。

example 2: $((\forall x)(F(x)\to G(x))),(\exists x)(F(x)\wedge H(x))\Rightarrow (\exist x)(G(x)\wedge H(x))$

| (1)  | $\exists (x)(F(x)\wedge H(x))$ | P        |
| ---- | ------------------------------ | -------- |
| (2)  | $F(c)\wedge H(c)$              | ES(1)    |
| (3)  | $F(c)$                         | T(2)I    |
| (4)  | $\forall (x)(F(x)\to G(x))$    | P        |
| (5)  | $F(c)\to G(c)$                 | US(4)    |
| (6)  | $G(c)$                         | T(3)(5)I |
| (7)  | $H(c)$                         | T(2)I    |
| (8)  | $G(c)\wedge H(c)$              | T(6)(7)E |
| (9)  | $\exists x(G(x)\wedge H(x))$   | EG(8)    |

example 3: $((\forall x)(C(x)\to W(x)\wedge R(x))),((\exists x)(C(x)\wedge Q(x)))\Rightarrow (\exists x)(Q(x)\wedge R(x))$

| (1)  | $\exist x(C(x)\wedge Q(x))$         | P        |
| ---- | ----------------------------------- | -------- |
| (2)  | $C(c)\wedge Q(c)$                   | ES(1)    |
| (3)  | $C(c)$                              | T(2)I    |
| (4)  | $\forall x(C(x)\to W(x)\wedge R(x)$ | P        |
| (5)  | $C(c)\to W(c)\wedge R(c)$           | US(4)    |
| (6)  | $W(c)\wedge R(c)$                   | T(3)(5)I |
| (7)  | $R(c)$                              | T        |
| (8)  | $Q(c)$                              | T(2)I    |
| (9)  | $R(c)\wedge Q(c)$                   | T(7)(8)E |
| (10) | $\exists x(Q(x)\wedge R(x))$        | EG(9)    |

## 5.集合

集合是一个不能精确定义的基本概念。直观地说，集合是具有某种属性的事物的全体，或是一些确定对象的汇合。

**有限集与无限集**

- 只含有有限多个元素的集合称为有限集，否则称为无限集
- 有限集中元素的个数称为集合的`基数`
- 集合$A$的基数表示为$|A|$,或者$card(A)$

### 5.1集合间的关系

Theorem 1:  两个集合$A$和$B$相等，当且仅当它们包含的元素相同。

> 集合$A$与$B$相等，记作$A=B$.若A与B不相等，则记作$A\neq B$.

Definition 2:  如果$A$中每个元素都是$B$中的元素，则称A为B的`子集`，记作$A\subseteq B$或$B\supseteq A$。如果$A\subseteq B$且$A\neq B$，则称A为B的`真子集`，记作$A\sub B$。

> $A\subseteq B\Leftrightarrow (\forall x)(x\in A\to x\in B)$
>
> $A\sub B\Leftrightarrow(\forall x)(x\in A \to x\in B)\wedge(\exists x)(x\in B\wedge x\notin A)$

Theorem 3:  设$A$,$B$为两个集合，$A=B$当且仅当$A\subseteq B$且$B\subseteq A$。

> $A=B\Leftrightarrow (A\subseteq B)\wedge(B\subseteq A)$

Theorem 4:  对于任意集合$A$，$\varnothing\subseteq\ A$,即空集是一切集合的子集。

- 区分$\in$和$\subseteq$
- {$\varnothing$}是一元集，而不是空集

> card({$\varnothing$}) = 1;
>
> card($\varnothing$) = 0.



| 表达式                                  | 真假值                                                       |
| --------------------------------------- | ------------------------------------------------------------ |
| $\varnothing \subseteq\varnothing $     | T(空集是一切集合的子集)                                      |
| $\varnothing \in\varnothing $           | F(空集没有元素，任何集合都不属于空集)                        |
| $\varnothing \subseteq\{\varnothing \}$ | T(空集是一切集合的子集)                                      |
| $\varnothing \in\{\varnothing \}$       | T($\{\varnothing \}$是包含空集的一元集，空集自然属于$\{\varnothing \}$) |

包含空集的运算
$$
\varnothing\cap\{\varnothing\}=\varnothing
\\\{\varnothing\}\cap\{\varnothing\}=\{\varnothing\}
\\\{\varnothing,\{\varnothing\}\}-\varnothing=\{\varnothing,\{\varnothing\}\}
\\\{\varnothing,\{\varnothing\}\}-\{\varnothing\}=\{\{\varnothing\}\}
\\\{\varnothing,\{\varnothing\}\}-\{\{\varnothing\}\}=\{\varnothing\}
$$
**罗素悖论**

​	设论域是所有集合的集合，并定义集合$S= \{ A |A\notin A\}$。这样，S是不以自身为元素的全体集合的集合。



### 5.2集合恒等式

- *幂等律*

$A\cup A=A,A\cap A = A$

- *结合律*

$(A\cup B)\cup C=A\cup (B\cup C) $

$(A\cap B)\cap C=A\cap (B\cap C)$

- *交换律*

$A\cup B=B\cup A$

$A\cap B=B\cap A$

- *分配律*

$A\cup (B\cap C)=(A\cup B)\cap(A\cup C)$

$A\cap (B\cup C)=(A\cap B)\cup(A \cap C)$

- *同一律*

$A\cup \varnothing =A,A\cap U=A$

- *零律*

$A\cup E=E,A\cap \varnothing =\varnothing$

- *双补律*

$A\cup\overline{A}=U,A\cap\overline{A}=\varnothing$

- *德摩根律*

$\overline{A\cup B}=\overline A\cap\overline B,\overline{A\cap B}=\overline A\cup\overline B$

- *吸收律*

$A\cup(A\cap B)=A,A\cap(A\cup B)=A$

- *对合律*

$\overline{(\overline A)}=A$



### 5.3幂集

Definition 3: 给定集合$A$，以$A$的全体子集为元素构成的集合，称为$A$的`幂集`，记为$\wp(A)(或2^{A})$,即
$$
\wp (A)=\{X\,|\,X\subseteq A\}
$$
> 若某集合的元素数量为$n$，则其幂集的元素数量为$2^n$，即该集合的所有子集数量。

$example$ 1: $A=\{1,2,3\}$，将$A$的子集分类:



- 0元子集，也就是空集，只有一个：$\varnothing$
- 1元子集，即单元集：{1},{2},{3}
- 2元子集：{1,2},{1,3},{2,3}
- 3元子集：{1,2,3}，即$A$自身

则$A$的幂集为$\wp(A)=\{\varnothing,\{1\},\{2\},\{3\},\{1,2\},\{1,3\},\{2,3\},\{1,2,3\}\}$。



$example$ 2: $A=${$a$,{$a$}},求$\wp (A):$

​	0元集： $\varnothing$

​	1元集： {$a$},{{$a$}}

​	2元集： {$a$,{$a$}}

$\wp(A)=${$\varnothing $,{$a$},{{$a$}},{$a$,{$a$}}}.



$example$ 3: 求$\wp (\wp(\wp(\varnothing )))$

​	
$$
\wp(\varnothing) =\{\varnothing\}
\\\wp(\wp(\varnothing))=\{\varnothing,\{\varnothing\}\}
\\\wp(\wp(\wp(\varnothing)))=\{\varnothing,\{\varnothing\},\{\{\varnothing\}\},\{\varnothing,\{\varnothing\}\}\}
$$


### 5.4序偶

Definition 4: 两个元素$x,y$构成的有序二元组$(x,y)$叫`序偶`或有序对。

### 5.5笛卡尔积

Definition 5: 对任意集合$A_1,A_2,...,A_n$

- $A_1\times A_2$称为集合$A_1,A_2$的笛卡尔积或直积，定义为：

$$
A_1\times A_2=\{(u,v)|u\in A_1\wedge v\in A_2\}
$$



- $A\times B\neq B\times A, 当A\neq\varnothing\wedge B\neq\varnothing\wedge A\neq B时$，因为：

$$
A\times B=\{(a,b)|a\in A\wedge b\in B\},
\\B\times A=\{(b,a)|b\in B\wedge a\in A\}.
$$

而序偶$(a,b)\neq(b,a),$当$a\neq b$时。

$example$ 4:$A=\{0,1\},B=\{1,2\}$

$i)\quad A\times\{1\}\times B$

$ii)\quad A^2\times B$
$$
i)\quad原式=P\{(0,1),(1,1)\}\times\{1,2\}
\\\quad =\{((0,1),1),((0,1),2),((1,1),1),((1,1),2)\}
\\ii)\quad原式=\{0,1\}\times\{0,1\}\times \{1,2\}
\\\quad=\{(0,0),(1,0),(0,1),(1,1)\}\times\{1,2\}
\\=\{((0,0),1),((0,0),2),((1,0),1),((1,0),2),((0,1),1),((0,1),2),((1,1),1),((1,1),2)\}
$$


$example$ 5: 证明集合恒等式 $(B\cap C)\times A=B\times A\cap C\times A$

> 在证明中大量用到命题逻辑的等值式，在叙述中采用半形式化的方法，其中$\Leftrightarrow$表示当且仅当。 

proof:
$$
\forall (x,y)\in(B\cap C)\times A
\\\Leftrightarrow x\in B\cap C\wedge y \in A\quad\quad\quad\qquad\,\,
\\\Leftrightarrow x\in B\wedge x\in C\wedge y\in A \wedge y \in A 
\\\Leftrightarrow x\in B\wedge y\in A \wedge x\in C\wedge y\in A
\\\Leftrightarrow(x,y)\in B\times A\wedge (x,y)\in C\times A
\\\Leftrightarrow(x,y)\in (B\times A)\cap(C\times A)\qquad
$$
$example$ 6: 证明$(A-B)\times C=A\times C-B\times C$

proof:

顺着推:
$$
\forall(x,y)\in(A-B)\times C
\\\Leftrightarrow x\in A-B\wedge y\in C
\\\Leftrightarrow x\in A\wedge x\notin B\wedge y\in C
\\\Leftrightarrow x\in A\wedge y\in C \wedge x\notin B\wedge y\in C\quad (1)
\\\Rightarrow (x,y)\in A\times C\wedge(x,y)\notin B\times C\quad (2)
$$
*注意，由于(2)式成立时，$x,y$分别存在$x\in B\wedge y\notin C$或$x\notin B\wedge y\in C$或$x\notin B\wedge y\notin C$三种情况，即(2)式无法得到(1)式，最终也只能证明出$(A-B)\times C\subseteq A\times C-B\times C$。*

尝试逆着推:
$$
\forall(x,y)\in A\times C\wedge(x,y)\notin B\times C
\\\Leftrightarrow (x\in A\wedge y\in C)\wedge(x\notin B\vee y\notin C)
\\\Leftrightarrow ((x\in A \wedge y\in C)\wedge x\notin B)\vee((x\in A\wedge y\in C)\wedge y\notin C)
\\\Leftrightarrow x\in A\wedge x\notin B\wedge y\in C
\\\Leftrightarrow x\in(A-B)\wedge y\in C
\\\Leftrightarrow (x,y)\in(A-B)\times C
\\\Leftrightarrow (A-B)\times C
$$
证明完毕。

> 要证对于任意的$x$有$x\in P\Rightarrow x\in Q$和$x\in Q\Rightarrow x\in P$成立，对于某些恒等式可以将这两个方向推理合在一起，就是$x\in P\Leftrightarrow x\in Q$。

$example$ 7: 证明$A\subseteq B\Leftrightarrow C\times A\subseteq C\times B$
$$
先证A\subseteq B\Rightarrow C\times A\subseteq C\times B
\\\forall(x,y)\in C\times A
\\\Leftrightarrow x\in C\wedge y \in A
\\\Rightarrow x\in C\wedge y\in B
\\\Leftrightarrow(x,y)\in C\times B
\\所以A\subseteq B\Rightarrow C\times A\subseteq C\times B
\\再证C\times A\subseteq C\times B\Rightarrow A\subseteq B
\\\forall x\in A,\exists y\in C
\\\Leftrightarrow(x,y)\in A\times C
\\\Leftrightarrow(y,x)\in C\times A
\\\Rightarrow (y,x)\in C\times B
\\x\in B
\\所以C\times A\subseteq C\times B\Rightarrow A\subseteq B
\\\because (A\subseteq B\Rightarrow C\times A\subseteq C\times B)\wedge(C\times A\subseteq C\times B\Rightarrow A\subseteq B)
\\\therefore A\subseteq B\Leftrightarrow C\times A\subseteq C\times B
\\证毕
$$

## 6.关系

关系是各个对象之间的联系和对应，最常见的是两组对象之间的联系和对应。

### 6.1二元关系

Definition 1: 令$A$和$B$是任意两个集合，直积$A\times B$的子集$R$称为$A$到$B$的`二元关系`。

- $R$中的任一序偶$(x,y)$可记为$(x,y)\in R$或$xRy$，$x$称为前域，$y$称为陪域
- 不在$R$中的序偶$(x,y)$记为$(x,y)\notin R$或$x\cancel Ry$

特别地，若$R\subseteq A\times A$,称$R$为$A$上的`二元关系`。

**几个特殊的二元关系**

- $\varnothing \subseteq A\times B$,称$\varnothing $为$A$到$B$的`空关系`
- $A\times B\subseteq A\times B$，称$A\times B$为$A$到$B$的`全关系`或`全域关系`$E_A$
- $I_A=\{(x,x)|x\in A\}$,称为$A$上的`恒等关系` 

> $I_A\subseteq A\times A$
>
> $I_A=\{(x,x)|A\}$
>
> $\forall x\in A\Leftrightarrow (x,x)\in I_A$
>
> $A=\{1,2,3\},I_A=\{(1,1),(2,2),(3,3)\}$

$example\ 1$: 设$A=\{1,2,3,4\}$，求$A$上的“小于等于”关系$L_A$
$$
L_A=\{(x,y)|x\in A\wedge y\in A\wedge x\leq y\}
\\=\{(1,1),(1,2),(1,3),(1,4),(2,2),(2,3),(2,4),(3,3),(3,4),(4,4)\}
$$

### 6.2定义域和值域

设$R$为一个二元关系，

- 由$(x, y) \in R$的所有$x$组成的集合dom$R$为$R$的`定义域`(domain),即

$$
\text{dom}R=\{x|((\exists y)(x,y)\in R)\}
$$

- 由$(x, y) \in R $的所有$y$组成的集合ran$R$称为$R$的`值域`(range),即

$$
\text{ran} R=\{y|  (\exist x)((x, y) \in R)\}
$$


显然地,

-  dom$R \subseteq A$,
-  ran$R \subseteq B$,
- $R \subseteq$dom$R\times$ran$R\subseteq A\times B$ 

$example\ 2$: 设$A=\{a,b,c,d,e,f\},B=\{\alpha,\beta,\gamma,\delta\}$，记关系$R$为
$$
R=\{(b,\alpha),(b,\beta),(c,\beta),(d,\gamma),(f,\gamma)\}
$$
那么如图所示：

<img src="../../Pictures/离散数学/SharedScreensh2ot.jpg" style="zoom:50%;" />

> 注意，不能说$A$就是定义域或$B$就是值域，只有$A$和$B$有对应关系的$A$的部分称为定义域，$A$和$B$有对应关系的$B$的部分称为值域。

$example \ 3$: 在一个有$n$个元素的集合$A$上，可以有多少种不同的关系？
$$
集合 A 上的二元关系的个数与 A \times A 的子集个数相同.若 card(A) = n,
\\则card(A \times A) = n^2
\\所以,A \times A 的子集个数就有 2^{n^2}个,即 A 上不同的二元关系有 2^{n^2}个.
$$

例如,在集合{a,b,c,d}上有 $2^{4^2}= 2^{16} = 65536 $个不同的二元关系；

在集合{a,b,c,d,e}上有$2^{5^2}= 2^{25} = 33554432$个不同的二元关系；

在集合{a,b,c,d,e,f}上有$2^{6^2}= 2^{36} = 68719476736 $个不同的二元关系。

> 当集合$A$,$B$为有限集时，$A\times B$共有$2^{|A||B|}$个子集，即从$A$到$B$不同关系有$2^{|A||B|}$个。

**二元关系的表示**

一个二元关系可用集合(序偶的集合)，`关系矩阵`，`关系图`表示。

$example \ 4$: 设集合$X=\{x_1,x_2,x_3,x_4\}$，$Y= \{y_l, y_2,y_ 3\} $。$X$到$Y$上的关系$R$为
$$
R=\{(x_1,y_1),(x_1,y_3),(x_2,y_2),(x_2,y_3),(x_3,y_1),(x_4,y_1),(x_4,y_2)\},试写出关系矩阵M_R和关系图G_R
$$
<img src="../../Pictures/离散数学/SharedScreenshot.jpg" style="zoom:50%;" />

### 6.3关系的运算

Theorem 1:若$Z$和$S$是从集合$X$到集合$Y$的两个关系,则$Z,S $的并、交、补、差,仍是$X$到$Y$的关系。

proof:
$$
\because Z\subseteq X\times Y,S\subseteq X\times Y
\\\therefore Z\cup S\subseteq X\times Y
\\Z\cap S\subseteq X\times Y
\\\sim S=(X\times Y-S)\subseteq X\times Y
\\Z-S=Z\cap \sim S\subseteq X\times Y
$$

### 6.4逆关系

definition 2: 设$R$是从$A $到$ B $的二元关系,关系$ R $的逆($R $的`逆关系`) 记为$ R^C $或$ \widetilde{R}$,定义如下:
$$
R^C=\{(b,a)|(a,b)\in R\}
$$

- 恒等关系的逆，是恒等关系
- 空关系的逆，是空关系
- 全域关系的逆，是全域关系

**逆关系的求法**

- `列举法`: 把$ R $中每一序偶的元素顺序互换,可得到逆关系$ R^C $的所有元素
- `关系矩阵`: 将矩阵$ M_R $转置，得$ R^C$的关系矩阵$ M_{R^C}$，即$M_{R^C}=M_R^T$
- `关系图`: 在$ R $的关系图中,颠倒每条弧(有向边)的头方向,得到$ R^C$的关系图

Theorem 2: 设$R,R_1,R_2$是$A$到$B$的二元关系，则

- $(R^C)^C=R$
- $(R_1\cup R_2)^C=R_1^C\cup R_2^C$
- $(R_1\cap R_2)^C=R_1^C\cap R_2^C$
- $(R_1-R_2)^C=R_1^C-R_2^C$
- $(\overline{R})^C=\overline{R^C}$(这里$\overline R=A\times B-R$)

$example \ 5$: 证明$(R^C)^C=R$
$$
\forall (x,y)\in (R^C)^C
\\\Leftrightarrow(y,x)\in R^C
\\\Leftrightarrow(x,y)\in R
$$
$example \ 6$: 证明$(R_1\cup R_2)^C=R_1^C\cup R_2^C$
$$
\forall (x,y)\in(R_1\cup R_2)^C
\\\Leftrightarrow(y,x)\in (R_1\cup R_2)
\\\Leftrightarrow(y,x)\in R_1\vee(y,x)\in R_2
\\\Leftrightarrow(x,y)\in R_1^C \vee (x,y)\in R^C_2
\\\Leftrightarrow (x,y)\in (R_1^C\cup R_2^C)
$$
$example \ 7$: 证明$(\overline{R})^C=\overline{R^C}$
$$
\forall (x,y)\in (\overline{R})^C
\\\Leftrightarrow(y,x)\in \overline R
\\\Leftrightarrow(y,x)\notin R
\\\Leftrightarrow(x,y)\notin R^C
\\\Leftrightarrow(x,y)\in \overline{R^C}
$$

### 6.5关系的复合

Definition 3: 如果$R_1\subseteq A\times B,R_2\subseteq B\times C$，则$R_1\circ R_2\subseteq A\times C$，可表示为：
$$
R_1\circ R_2=\{(a,c)|(\exist b\in B)\wedge(a,b)\in R_1\wedge (b,c)\in R_2\}
$$
$example \ 1$: 设关系$R=\{(1,2),(2,3),(3,4),(2,2)\},S=\{(4,2),(2,5),(3,1),(1,3),(3,5)\}$，求复合关系$R\circ S,S\circ R,R\circ R,R\circ R\circ R$。

解：
$$
R\circ S=\{(1,5),(2,1),(3,2),(2,5)\}
\\S\circ R=\{(4,2),(4,3),(3,2),(1,4)\}
\\R\circ R=\{(1,2),(1,3),(2,2),(2,3),(2,4)\}
\\R\circ R\circ R=(R\circ R)\circ R=\{(1,2),(1,3),(1,4),(2,2),(2,3),(2,4)\}
$$
**关系合成运算的性质**

- 设$R$是从$A$到$B$的关系，$I_A$,$I_B$分别是$A$,$B$上的恒等关系，则$I_A \circ R=R \circ I_B=R$
- 如果关系**$R_1$的值域**与**$R_2$的定义域**的交集为空集，则合成关系$R_1\circ R_2$是空关系
- 关系的合成满足`结合律`:

​	 	设$R_1,R_2,R_3$分别是从$A$到$B$，$B$到$C$，$C$到$D$的关系，则$(R_1\circ R_2)\circ R_3 =R_1\circ( R_2\circ R_3)$

**用关系矩阵求复合关系**

设$A\circ B=C$，关系矩阵$M_A=(a_{ij})_{n\times n},M_B=(b_{ij})_{n\times n},M_C=(c_{ij})_{n\times n}$，则
$$
c_{ij}=\bigvee_{k=1}^{n}(a_{ik}\wedge b_{kj})
$$
上式中$\vee$代表**逻辑加**，满足$0\vee 0=0,0\vee 1=1,1\vee 0=0,1\vee 1=1$；

$\wedge$代表**逻辑乘**，满足$0\wedge 0=0,0\wedge 1=0,1\wedge 0=0,1\wedge 1=1$。

$example \ 2$: 设$A= \{1,2,3,4\}$，$B=\{2,3,4\}$，$C= \{1,2,3\}$，$R_1$是从$A$到$B$的关系，$R_2$是从$B$到$C$的关系：
$$
R_1= \{(x,y) |x+y=6\}
\\R_2=\{(y,z)| y-z=1\}
$$
请用关系矩阵表示关系的合成$R1 \circ R2$:

`解`： 由题可知$R_1=\{(2,3),(3,3),(4,2)\},R_2=\{(2,1),(3,2),(4,3)\}$

关系矩阵表示如下图：(使用矩阵的乘法)

<img src="../../Pictures/离散数学/微信图片_20231109125126.png" style="zoom:50%;" />



### 6.6关系的幂

 设$R$是集合$A$上的二元关系，$n \in N$为任一自然数，则$R$的$n$次幂记为$R^n$，定义为:

- $R^0$为$A$上的恒等关系$R^0= \{(x,x)|x\in A\}$

- $R^{n+1}=R^n\circ R$

Theorem 3: 设$R_1$是从$A$到$B$的关系，$R_2$是从$B$到$C$的关系，则
$$
(R_1\circ R_2)^C=R_2^C\circ R_1^C
$$
证:
$$
(c,a)\in (R_1\circ R_2)^C
\\\Leftrightarrow (a,c)\in R_1\circ R_2 
\\\Leftrightarrow (\exist b)(b\in B\wedge(a,b)\in R_1\wedge(b,c)\in R_2)
\\\Leftrightarrow(\exist b)(b\in B\wedge (b,a)\in R_1^C\wedge (c,b)\in R_2^C)
\\\Leftrightarrow(\exist b)(b\in B\wedge (c,b)\in R_2^C\wedge  (b,a)\in R_1^C)
\\\Leftrightarrow(c,a)\in R_2^C\circ R_1^C
$$

### 6.7关系的基本类型

已知$R\subseteq A\times A$，则有：

| 性质   | 定义形式                                                   | 补充                                                         |
| ------ | ---------------------------------------------------------- | ------------------------------------------------------------ |
| 自反   | $\forall x\in A\Leftrightarrow(x,x)\in R$，则称R自反       | 关系矩阵的主对角线上均是1，其他未知                          |
| 反自反 | $\forall x\in A\Leftrightarrow (x,x)\notin R$，则称R反自反 | 关系矩阵的主对角线上均是0，其他未知                          |
| 对称   | $(x,y)\in R\Leftrightarrow(y,x)\in R$，则称R对称           | 关系矩阵上是对称矩阵                                         |
| 反对称 | $(x,y)\in R\wedge(y,x)\in R\Rightarrow x=y$                | 关系矩阵不是对称矩阵，但主对角线上允许有/1存在               |
| 可传递 | $(x,y)\in R\wedge(y,z)\in R\Rightarrow(x,z)\in R$          | 可传递是一个关系自身所拥有的性质，但关系的复合是两个关系的运算 |

> $example$ 
>
> 自反:{(a,a),(b,b),(c,c)}
>
> 反自反:{(a,b),(b,c),(a,c)}
>
> 既不是自反也不是反自反:{(a,a),(b,b),(a,c)}
>
> 对称:{(a,a),(a,b),(b,a),(b,b)}
>
> 反对称:{(a,a),(a,b),(b,b)} or {(a,a),(b,b)}
>
> 既不是对称也不是反对称:{(a,a),(a,b),(b,a),(a,c)}
>
> 可传递:{(a,a),(a,b),(a,c),(a,d),(c,d)}

其中，

- $R$自反，当且仅当$I_A\subseteq R$

证明：
$$
先证R自反\Rightarrow I_A\subseteq R
\\\forall(x,y)\in I_A
\\\Rightarrow(x=y)\wedge x\in A
\\\Rightarrow (x,x)\in R
\\\Rightarrow(x,y)\in R
\\即R自反\Rightarrow I_A\subseteq R
\\再证I_A\subseteq R\Rightarrow R自反
\\\forall x\in A
\\\Leftrightarrow (x,x)\in I_A
\\\Rightarrow (x,x)\in R
\\即R自反\Leftrightarrow I_A\subseteq R
$$

- $R$反自反，当且仅当$I_A\cap R=\varnothing $

证明:
$$
先证明R反自反\Rightarrow I_A\cap R=\varnothing
\\使用反证法证明，即R反自反\Rightarrow I_A\cap R\neq\varnothing
\\\exist(x,y)\in I_A\cap R
\\\Leftrightarrow(x,y)\in I_A\wedge(x,y)\in R
\\\Rightarrow x\in A\wedge(x=y)\wedge(x,y)\in R
\\\Rightarrow (x,x)\in R(与反自反的定义矛盾)
\\即I_A\cap R\Rightarrow\varnothing
\\再证明I_A\cap R=\varnothing\Rightarrow R反自反
\\\forall x\in A
\\\Leftrightarrow(x,x)\in I_A
\\\Rightarrow(x,x)\notin R \quad (因为I_A\cap R=\varnothing)
\\即R反自反\Leftrightarrow I_A\cap R=\varnothing
$$

- $R$对称，当且仅当$R^C=R$

证明：
$$
先证明R对称\Rightarrow R^C=R
\\\forall(x,y)\in R^C
\\\Leftrightarrow (y,x)\in R
\\\Leftrightarrow(x,y)\in R\quad(因为R对称)
\\即R对称\Rightarrow R^C=R
\\再证明R^C=R\Rightarrow R对称
\\\forall(x,y)\in R
\\\Leftrightarrow(y,x)\in R^C
\\\Leftrightarrow(y,x)\in R\quad (因为R^C=R)
\\即R对称\Leftrightarrow R^C=R
$$

- $R$反对称，当且仅当$R\cap R^C\subseteq I_A$

证明:
$$
先证R反对称\Rightarrow R\cap R^C\subseteq I_A
\\\forall(x,y)\in R\cap R^C
\\\Leftrightarrow(x,y)\in R\wedge(x,y)\in R^C
\\\Leftrightarrow(x,y)\in R\wedge(y,x)\in R
\\\Rightarrow x=y\quad(因为R反对称)
\\\Rightarrow (x,y)\in I_A
\\即R反对称\Rightarrow R\cap R^C\subseteq I_A
\\再证R\cap R^C\subseteq I_A\Rightarrow R反对称
\\设(x,y)\in R\wedge(y,x)\in R
\\\Leftrightarrow(x,y)\in R\wedge(x,y)\in R^C
\\\Leftrightarrow (x,y)\in R\cap R^C
\\\Leftrightarrow(x,y)\in I_A\quad(因为R\cap R^C\subseteq I_A)
\\\Rightarrow x=y
\\即R反对称\Leftrightarrow R\cap R^C\subseteq I_A
$$

- $R$可传递，当且仅当$R\circ R\subseteq R$

证明:
$$
先证R可传递\Rightarrow R\circ R\subseteq R
\\\forall (x,y)\in R\circ R
\\\Leftrightarrow\exist z((x,z)\in R\wedge(z,y)\in R)
\\\Rightarrow(x,y)\in R\quad(因为R可传递)
\\再证 R\circ R\subseteq R \Rightarrow R可传递
\\设(x,y)\in R\wedge(y,z)\in R
\\\Rightarrow(x,z)\in R\circ R
\\\Rightarrow(x,z)\in R\quad(因为R\circ R\subseteq R)
\\即R可传递\Leftrightarrow R\circ R\subseteq R
$$

### 6.8等价关系

**Definition 1: 设$R$是非空集合$A$上的二元关系，如果$R$同时满足自反、对称、可传递，则称$R$为$A$上的`等价关系`。**

$Example\ 1$: 设$A=\{1,2,3,4,5,6,7\}$,$\mathbb{Z}$为整数集合，$A$上的关系$R$定义为：
$$
R=\{(x,y)|x,y\in A\wedge (x-y)/3\in \mathbb{Z}\}
\\说明R是等价关系
$$
`解`

$R=\{(1,1),(2,2),(3,3),(4,4),(5,5),(6,6),(7,7),(1,4),(4,1),(1,7),(7,1),(2,5),(5,2),(3,6),(6,3),(4,7),(7,4)\}$；显然$R$是自反的，对称的和传递的，因此$R$是等价关系，$R$关系图如下

<img src="../../Pictures/离散数学/SharedScreenshot - 副本.jpg" style="zoom:50%;" />

> 已知$A_1,A_2,A_3,…,A_n$是A的子集，若满足
> $$
> \left\{
> \begin{aligned}
> \bigcup_{i=1}^n A_i=A \\
> A_i\cap A_j=\varnothing
> \end{aligned}
> \right.
> $$
> 则说明$A_1,A_2,A_3,…,A_n$是A的一个划分。其中，等价关系和划分具有一一对应的关系

$Example \ 2$:$R=\{(x,y)|x,y\in \mathbb {Z}\wedge x\equiv y(mod\ k)\}$，称$R$为模$k$同余关系，称$x$与$y$模$k$相等，证明$R$是等价关系。

`解`
$$
\because x\equiv y\ (mod\ k)
\\\therefore \exist z\in \mathbb Z,x-y=kz
\\i)\ \forall x\in A,x-x=0\times k(0\in \mathbb Z) \Leftrightarrow (x,x)\in R
\\即R满足自反
\\ii)\ \forall(x,y)\in R\Leftrightarrow(\exist z\in \mathbb Z)(x-y=kz)\Leftrightarrow y-x=-kz(-z\in \mathbb Z)\Leftrightarrow(y,x)\in R
\\即R满足对称
\\iii)设(x,y)\in R\wedge(y,z)\in R,\exist z_1,z_2\in \mathbb Z,使得x-y=kz_1,y-z=kz_2\Leftrightarrow x-z=k(z_1+z_2)\Leftrightarrow(x,z)\in R
\\即R满足可传递
\\综上,R是等价关系
$$


### 6.9等价类和商集

**Definition 2: 设R为非空集合A上的等价关系，$\forall a\in A$,令**
$$
[a]_R=\{x|x\in A\wedge aRx\}
$$
**称$[a]_R$为a关于R的等价类，简称为a的`等价类`，简记为$[a]$。**



$Example\ 2$:设$A=\{a,b,c\}$，求等价关系
$$
R=\{(a,a),(b,b),(c,c),(b,c),(c,b)\}
$$
的所有等价类。

`解`
$$
[a]=\{a\}
\\ [b]=\{b,c\}
\\ [c]=\{c,b\}
$$

> 一个划分决定一个商集：
>
> $A/R=\{[a],[b],[c]\}=\{\{a\},\{b,c\}\}$

**Theorem 1: 设$R$为非空集合$A$上的等价关系，$\forall a,b\in A$，**
$$
(a,b)\in R\Leftrightarrow aRb\Leftrightarrow [a]_R=[b]_R
$$
`证明`
$$
先证aRb\Rightarrow [a]=[b]
\\\forall x\in  [a]
\\\Leftrightarrow(a,x)\in R
\\\Rightarrow (a,x)\in R\wedge (a,b)\in R
\\\Leftrightarrow (a,x)\in R\wedge (b,a)\in R(R对称)
\\\Leftrightarrow(b,x)\in R(R可传递)
\\\Rightarrow x\in [b]
\\\Rightarrow [a]\subseteq [b]
\\同理,\forall x\in [b]\Rightarrow [b]\subseteq [a]
\\即[a]=[b]
\\再证[a]=[b]\Rightarrow aRb
\\a\in [a]\wedge b\in [b]
\\\Rightarrow b\in [a]([a]=[b])
\\\Rightarrow (a,b)\in R
\\\therefore aRb\Leftrightarrow [a]=[b]
$$
**Definition 3: 设$R$为非空集合$A$上的等价关系，集合$\{[a]_R|a\in A\}$称A为关于R的`商集`，记作A/R。**

证明$A/ R$是$A$上的一个划分。

`证`
$$
先证\bigcup_{i=1}^n A_i=A:
\\\forall a\in A
\\\Leftrightarrow [a]\in A/  R
\\\Rightarrow \bigcup_{\forall a\in A}[a]=A
\\再证A_i\cap A_j=\varnothing
\\\forall (a,b)\in R,若[a]和[b]不相等，则[a]\cap[b]=\varnothing
\\使用反证法，即[a]\cap[b]\neq\varnothing
\\\exist x\in[a]\cap[b]
\\\Leftrightarrow(a,x)\in R\wedge(b,x)\in R
\\\Leftrightarrow(a,x)\in R\wedge(x,b)\in R(R对称)
\\\Rightarrow (a,b)\in R(R可传递)
\\\Leftrightarrow [a]=[b](与[a]\neq[b]矛盾)
\\即A_i\cap A_j=\varnothing
$$
$Example \ 3$: 设$A=\{a,c,b,d,e\}$，$A$有一个划分$S=\{\{a,b\},\{c\},\{d,e\}\}$。试写出划分$S$所确定的$A$上的等价关系。

`解`
$$
R_1=\{(a,a),(a,b),(b,a),(b,b)\}
\\R_2=\{(c,c)\}
\\R_3=\{(d,e),(e,d),(e,e),(d,d)\}
\\R=R_1\cup R_2\cup R_3=\{(a,a),(a,b),(b,a),(b,b),(c,c),(d,e),(e,d),(e,e),(d,d)\}
$$
$Example \ 4$: 求出集合$A=\{1，2，3\}$上的所有等价关系。

解： $A$的所有划分如下图所示：

<img src="../../Pictures/离散数学/33.jpg" style="zoom:50%;" />

$A$上的所有等价关系就是上述$5$种划分对应的等价关系，它们依次为$E_A,R_2,R_3,R_4,I_A$，其中
$$
E_A=A\times A
\\I_A=\{(1,1),(2,2),(3,3)\}
\\R_2=\{(2,3),(3,2)\}\cup I_A
\\R_3=\{(1,3),(3,1)\}\cup I_A
\\R_4=\{(2,1),(1,2)\}\cup I_A
$$


### 6.10序

序指一类定义在非空集$A$上，以满足传递性为基本条件的二元关系，它是通常的实数之间的大小次序概念的推广。

> 在实数集中，两个实数之间的“小于或等于”关系(记为$\leq$)是一种序，它满足：
>
> 1)自反性：$a\leq a$
>
> 2)反对称性： 若$a\leq b$且$b\leq a$，则$a=b$
>
> 3)传递性： 若$a\leq b，b\leq c$，则$a\leq c$
>
> 4)强连结性： 任给$a,b$，则$a\leq b$和$b\leq a$中至少有一个成立 

一般来说，如果任何集合$A$上存在二元关系(记为$\preceq $)，

- 能满足上述1~4，则称$A$上有一全序关系$\preceq$，$A$为`全序集`
- 只满足1~3的，称$A$为`偏序`



**Definition 4: 如果集合$A$上的二元关系$R$是`自反的`、`反对称的`和`传递的`，那么称$R$为$A$上的`偏序关系`（或偏序），称序偶$(A,R)$为`偏序集`。**其中，

- 偏序，又称`半序`
- 如果$R$是偏序关系，$(A,R)$常记为$(A,\preceq )$，“$\preceq$”是序关系符号，读作“小于或等于”
- $R$是偏序时，$aRb$就记为$a\preceq b$

$Example \ 5$: 

在任意实数集$A$中，以大小关系$\leq$为序，即$(p(A),\subseteq)$是偏序集

集合$A$的幂集$P(A)$中，以包含关系“$\subseteq$”为序，即$(P(A),\subseteq)$是偏序集

在正整数集中，以整除为序，得到一个偏序集



$Example \ 6$: 给定集合$A=\{2,3,6,8\}$，令“$\preceq$”$=\{(x,y)|x\ 整除\ y\}$。验证“$\preceq$”是偏序关系。

`解`：集合$A=\{2,3,6,8\}$上的整除关系为
$$
\preceq=\{(2,2),(2,6),(2,8),(3,3),(3,6),(6,6),(8,8)\}
$$
关系矩阵和关系图如下：

<img src="../../Pictures/离散数学/3.jpg" style="zoom:50%;" />

$Example \ 7$: 令$A\subseteq N^+$，对任意$m,n\in A,m|n$表示$m$整除$n$的关系(即$n$为$m$的整数倍：存在整数$k$满足$n=km$)，试证$(A,|)$是偏序集。

`证`：即要证整除关系具有自反性，反对称性和传递性。

- 自反性：$(\forall m)(m\in A\to m|m)$

- 反对称性：$(\forall m)(\forall n)((m|n)\wedge (n|m)\to (m=n))$

- 传递性：
  $$
  (\forall m)(\forall n)(\forall k)((m|n)\wedge(n|k)\to(\exist u)(\exist v)((k=un)\wedge(n=vm)))
  \\\Rightarrow (\forall m)(\forall n)(\forall k)((m|n)\wedge(n|k)\to(m|k))
  $$

得证。
